<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.13.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1700164259984-1" author="koten (generated)">
        <dropColumn columnName="member_id_fk" tableName="Item"/>
        <dropColumn columnName="payee_id_fk" tableName="completed_transaction"/>
        <dropColumn columnName="payer_id_fk" tableName="completed_transaction"/>
        <dropColumn columnName="payer_id_fk" tableName="future_transaction"/>

        <modifyDataType tableName="Member" columnName="id" newDataType="UUID"/>

        <addColumn tableName="Item">
            <column name="member_id_fk" type="UUID">
                <constraints foreignKeyName="FK_ITEM_ON_MEMBER_ID_FK" nullable="false" references="Member(id)"
                             validateNullable="true"/>
            </column>
        </addColumn>
        <addColumn tableName="completed_transaction">
            <column name="payee_id_fk" type="UUID">
                <constraints foreignKeyName="FK_COMPLETED_TRANSACTION_ON_PAYEE_ID_FK" nullable="false"
                             references="Member(id)" validateNullable="true"/>
            </column>
        </addColumn>
        <addColumn tableName="completed_transaction">
            <column name="payer_id_fk" type="UUID">
                <constraints foreignKeyName="FK_COMPLETED_TRANSACTION_ON_PAYER_ID_FK" nullable="false"
                             references="Member(id)" validateNullable="true"/>
            </column>
        </addColumn>
        <addColumn tableName="future_transaction">
            <column name="payer_id_fk" type="UUID">
                <constraints foreignKeyName="FK_FUTURE_TRANSACTION_ON_PAYER_ID_FK" nullable="false"
                             references="Member(id)" validateNullable="true"/>
            </column>
        </addColumn>
    </changeSet>

</databaseChangeLog>